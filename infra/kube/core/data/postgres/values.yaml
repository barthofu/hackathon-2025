longhorn-volume-manager:
  volumes:
    - appName: postgres17
      volumeName: data
      volumeSize: 2
      volumeNumberOfReplicas: 1

postgres17:
  defaultPodOptions:
    securityContext:
      fsGroup: 1000
      fsGroupChangePolicy: "OnRootMismatch"
    nodeSelector:
          kubernetes.io/hostname: "worker-1"

  controllers:
    main:
      replicas: 1
      containers:
        main:
          image:
            repository: postgres
            tag: 17.2-alpine
          # env:
          #   PG_DATA: /var/lib/postgresql/data
          envFrom:
            - secretRef:
                name: postgres-secrets
          securityContext:
            runAsUser: 0
            runAsGroup: 0

  service:
    main:
      controller: main
      type: ClusterIP
      ports:
        db:
          port: 5432

  persistence:
    data:
      existingClaim: pvc-postgres-postgres17-data
      globalMounts:
        - path: /var/lib/postgresql/data

